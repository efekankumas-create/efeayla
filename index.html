<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>♠ Online Blackjack ♥</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', sans-serif;
    background: radial-gradient(circle at top, #1c7c54, #0b3d2e);
    color: #fff;
    text-align: center;
  }

  h1 { margin-top: 20px; }

  .panel {
    background: rgba(0,0,0,0.35);
    margin: 20px auto;
    padding: 20px;
    border-radius: 16px;
    max-width: 420px;
    box-shadow: 0 10px 30px rgba(0,0,0,.4);
  }

  input, button {
    padding: 12px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    outline: none;
    margin: 6px;
  }

  input { width: 80%; }

  button {
    cursor: pointer;
    background: #ffcc00;
    color: #000;
    font-weight: bold;
    transition: transform .1s ease, background .2s;
  }

  button:hover { background: #ffd633; }
  button:active { transform: scale(0.95); }

  .cards {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
    min-height: 70px;
  }

  .card {
    width: 44px;
    height: 64px;
    background: #fff;
    color: #000;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    animation: deal .35s ease;
  }

  @keyframes deal {
    from { transform: translateY(-20px) scale(0.8); opacity: 0; }
    to { transform: translateY(0) scale(1); opacity: 1; }
  }

  .hidden { display: none; }
</style>
</head>

<body>

<h1>♠ Online Blackjack ♥</h1>

<div id="login" class="panel">
  <input id="room" placeholder="Oda Kodu (örn: efeayla)">
  <br>
  <button onclick="joinRoom()">Odaya Gir</button>
</div>

<div id="game" class="panel hidden">
  <h3 id="roomTitle"></h3>

  <h4>Efe</h4>
  <div id="efeCards" class="cards"></div>
  <button onclick="draw('efe')">Efe Kart Çek</button>

  <h4>Ayla</h4>
  <div id="aylaCards" class="cards"></div>
  <button onclick="draw('ayla')">Ayla Kart Çek</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyC_H3M5q_bFPPSi4Xw3_hpgPrbdTpcmEHo",
  authDomain: "blakja-a9592.firebaseapp.com",
  databaseURL: "https://blakja-a9592-default-rtdb.firebaseio.com",
  projectId: "blakja-a9592",
  storageBucket: "blakja-a9592.firebasestorage.app",
  messagingSenderId: "369055237282",
  appId: "1:369055237282:web:005a5b028efee55cd983fb"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
let roomCode = "";

function joinRoom() {
  roomCode = document.getElementById("room").value.trim();
  if (!roomCode) return alert("Oda kodu yaz");

  document.getElementById("login").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  document.getElementById("roomTitle").innerText = "Oda: " + roomCode;

  db.ref("rooms/" + roomCode).on("value", snap => {
    const data = snap.val() || {};
    render("efeCards", data.efe || []);
    render("aylaCards", data.ayla || []);
  });
}

function draw(player) {
  const card = Math.floor(Math.random() * 11) + 1;
  const ref = db.ref("rooms/" + roomCode + "/" + player);
  ref.get().then(snap => {
    const arr = snap.val() || [];
    arr.push(card);
    ref.set(arr);
  });
}

function render(id, cards) {
  const el = document.getElementById(id);
  el.innerHTML = "";
  cards.forEach(c => {
    const d = document.createElement("div");
    d.className = "card";
    d.innerText = c;
    el.appendChild(d);
  });
}
</script>

</body>
</html>
